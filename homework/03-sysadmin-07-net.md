# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
   ***Ответ:***
   ```
    vagrant@vagrant:~$ sudo ip -c -br link
    lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
    eth0             UP             08:00:27:73:60:cf <BROADCAST,MULTICAST,UP,LOWER_UP>

    Windows 
    ipconfig /all
    Адаптер Ethernet Ethernet:

    Состояние среды. . . . . . . . : Среда передачи недоступна.
    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Realtek PCIe GbE Family Controller
    Физический адрес. . . . . . . . . : 38-F3-AB-B7-98-C7
    DHCP включен. . . . . . . . . . . : Да
    Автонастройка включена. . . . . . : Да

    Адаптер Ethernet VirtualBox Host-Only Network:

    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
    Физический адрес. . . . . . . . . : 0A-00-27-00-00-07
    DHCP включен. . . . . . . . . . . : Нет
    Автонастройка включена. . . . . . : Да
    Локальный IPv6-адрес канала . . . : fe80::570:8d64:3eb1:1ea0%7(Основной)
    IPv4-адрес. . . . . . . . . . . . : 192.168.56.1(Основной)
    Маска подсети . . . . . . . . . . : 255.255.255.0
    Основной шлюз. . . . . . . . . :
    IAID DHCPv6 . . . . . . . . . . . : 688521255
    DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-54-25-C1-38-F3-AB-B7-98-C7
    DNS-серверы. . . . . . . . . . . : fec0:0:0:ffff::1%1
                                        fec0:0:0:ffff::2%1
                                        fec0:0:0:ffff::3%1
    NetBios через TCP/IP. . . . . . . . : Включен

    Адаптер беспроводной локальной сети Подключение по локальной сети* 1:

    Состояние среды. . . . . . . . : Среда передачи недоступна.
    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter
    Физический адрес. . . . . . . . . : 76-4C-A1-D8-FE-0B
    DHCP включен. . . . . . . . . . . : Да
    Автонастройка включена. . . . . . : Да

    Адаптер беспроводной локальной сети Подключение по локальной сети* 2:

    Состояние среды. . . . . . . . : Среда передачи недоступна.
    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #2
    Физический адрес. . . . . . . . . : F6-4C-A1-D8-FE-0B
    DHCP включен. . . . . . . . . . . : Нет
    Автонастройка включена. . . . . . : Да

    Адаптер беспроводной локальной сети Беспроводная сеть:

    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Realtek RTL8852AE WiFi 6 802.11ax PCIe Adapter
    Физический адрес. . . . . . . . . : 74-4C-A1-D8-FE-0B
    DHCP включен. . . . . . . . . . . : Да
    Автонастройка включена. . . . . . : Да
    Локальный IPv6-адрес канала . . . : fe80::3854:5a8f:892d:246b%3(Основной)
    IPv4-адрес. . . . . . . . . . . . : 192.168.1.2(Основной)
    Маска подсети . . . . . . . . . . : 255.255.255.0
    Аренда получена. . . . . . . . . . : 11 февраля 2022 г. 8:17:40
    Срок аренды истекает. . . . . . . . . . : 11 февраля 2022 г. 20:53:38
    Основной шлюз. . . . . . . . . : 192.168.1.1
    DHCP-сервер. . . . . . . . . . . : 192.168.1.1
    IAID DHCPv6 . . . . . . . . . . . : 57953441
    DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-54-25-C1-38-F3-AB-B7-98-C7
    DNS-серверы. . . . . . . . . . . : 81.200.240.19
                                        81.200.241.18
                                        8.8.8.8
                                        192.168.1.1
    NetBios через TCP/IP. . . . . . . . : Включен
    ```


2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

    ***Ответ:***
```
    Link Layer Discovery Protocol (LLDP) — протокол канального      уровня, который позволяет сетевым устройствам анонсировать в  сеть информацию о себе и о своих возможностях, а также собирать эту информацию о соседних устройствах.

    Пакет lldpd(apt-get install lldpd), команда lldpctl
```

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

    ***Ответ:***
    ```
    Используется технология VLAN (VLAN ID - метка в диапазоне 1 - 4096)
    Пакет vlan (apt-get install vlan)
    nano /etc/network/interfacesauto 
    auto vlan1400
    iface vlan1400 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
    ```

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
***Ответ:***
```
    LAG – агрегация портов
    -Используется для увеличения полосы в сторону сервера;●Как правило, на сервере имеется 3-4 сетевых интерфейса;
    -Позволяет использовать несколько физических интерфейсов как один логический.
    В Linux присутсвует модуль bonding - объединение сетевых интерфейсов в Linux, для управления bonding используется утилита ifenslave
    Этот метод настройки подразумевает:

    — указание параметров модуля для драйвера bonding в файле «/etc/modules.conf» или «/etc/modprobe.conf» (в зависимости от используемого дистрибутива)

    — добавления команд «modprobe» и/или «ifenslave» в глобальные скрипты инициализации системы (для систем, использующих sysconfig — это файл «/etc/init.d/boot.local», для систем, использующих initscripts — это «/etc/rc.d/rc.local» )

    Например, пусть есть две сетевые карты e100, в системе они названы как eth0 и eth1. Мы хотим их объединить по методу balance-alb в bond0, и что бы bond интерфейс поднимался после перезагрузки системы. Тогда в файл «/etc/init.d/boot.local» или «/etc/rc.d/rc.local» необходимо дописать строки:

    modprobe bonding mode=balance-alb miimon=100
    modprobe e100
    ifconfig bond0 192.168.0.1 netmask 255.255.255.0 up
    ifenslave bond0 eth0
    ifenslave bond0 eth1

```
5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
***Ответ:***
```
    с маской /29 количество IP адресов в сети будет равно 6 (+1 широковещательный адрес)
    из сети 10.10.10.0/24 можно получить 32 подсети с маской /29 по 6 хостов в каждой подсети

    Сеть     :  10.10.10.0/24        	
    Хост(min):	10.10.10.1	
    Хост(max):	10.10.10.254	
    Broadcast:	10.10.10.255	
    Хостов в сети:	254

    Подсети:
    Сеть     :  10.10.10.0/29        
    Хост(min):	10.10.10.1	
    Хост(max):	10.10.10.6	
    Broadcast:	10.10.10.7	
    .....
    Сеть     :  10.10.10.248/29      	
    Хост(min):	10.10.10.249	
    Хост(max):	10.10.10.254	
    Broadcast:	10.10.10.255	

```

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
***Ответ:***
```
    Можно использовать частную подсеть 100.64.0.0 (рекомендована согласно RFC 6598) с маской /26 (62 хоста)
```

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
***Ответ:***
```
    Windows:
    arp -a
    Интерфейс: 192.168.1.2 --- 0x3
    адрес в Интернете      Физический адрес      Тип
    192.168.1.1           e4-be-ed-6b-23-5f     динамический
    192.168.1.255         ff-ff-ff-ff-ff-ff     статический
    224.0.0.2             01-00-5e-00-00-02     статический
    224.0.0.22            01-00-5e-00-00-16     статический
    224.0.0.251           01-00-5e-00-00-fb     статический
    224.0.0.252           01-00-5e-00-00-fc     статический
    239.255.255.250       01-00-5e-7f-ff-fa     статический
    255.255.255.255       ff-ff-ff-ff-ff-ff     статический

    Интерфейс: 192.168.56.1 --- 0x7
    адрес в Интернете      Физический адрес      Тип
    192.168.56.255        ff-ff-ff-ff-ff-ff     статический
    224.0.0.2             01-00-5e-00-00-02     статический
    224.0.0.22            01-00-5e-00-00-16     статический
    224.0.0.251           01-00-5e-00-00-fb     статический
    224.0.0.252           01-00-5e-00-00-fc     статический
    239.255.255.250       01-00-5e-7f-ff-fa     статический

    Интерфейс: 192.168.218.1 --- 0xf
    адрес в Интернете      Физический адрес      Тип
    192.168.218.254       00-50-56-ed-44-f6     динамический
    192.168.218.255       ff-ff-ff-ff-ff-ff     статический
    224.0.0.2             01-00-5e-00-00-02     статический
    224.0.0.22            01-00-5e-00-00-16     статический
    224.0.0.251           01-00-5e-00-00-fb     статический
    224.0.0.252           01-00-5e-00-00-fc     статический
    239.255.255.250       01-00-5e-7f-ff-fa     статический
    255.255.255.255       ff-ff-ff-ff-ff-ff     статический

    Интерфейс: 192.168.201.1 --- 0x32
    адрес в Интернете      Физический адрес      Тип
    192.168.201.254       00-50-56-eb-70-63     динамический
    192.168.201.255       ff-ff-ff-ff-ff-ff     статический
    224.0.0.2             01-00-5e-00-00-02     статический
    224.0.0.22            01-00-5e-00-00-16     статический
    224.0.0.251           01-00-5e-00-00-fb     статический
    224.0.0.252           01-00-5e-00-00-fc     статический
    239.255.255.250       01-00-5e-7f-ff-fa     статический
    255.255.255.255       ff-ff-ff-ff-ff-ff     статический

    Читска кеша: 
    netsh interface ip delete arpcache
    Удаление только одного ip:
    arp -d <ip-addres>

    Linux:
    vagrant@vagrant:~$ ip neigh
    10.0.2.2 dev eth0 lladdr 52:54:00:12:35:02 DELAY
    или
    vagrant@vagrant:~$ arp -a
    ? (10.0.2.3) at 52:54:00:12:35:03 [ether] on eth0
    _gateway (10.0.2.2) at 52:54:00:12:35:02 [ether] on eth0

    Очитска кеша:
    sudo ip -s -s neigh flush all

    Удалить запись с IP
    ip neigh delete <ip-addres>
```
